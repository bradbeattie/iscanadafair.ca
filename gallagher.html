<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=700, initial-scale=1.0">
        <link rel="icon" href="favicon.ico" type="image/x-icon"/>
        <link href="https://fonts.googleapis.com/css?family=Cinzel|Open+Sans" rel="stylesheet">
        <title>Measuring Unfairness &mdash; Calculating Canada's Gallagher Index</title>
        <link rel="stylesheet" type="text/css" href="style2017.css">
    </head>
    <body>
        <div id="app">
            <div id="section-1" class="section">
                <h1>Calculating the Gallagher Index</h1>
                <p class="highlight">The Gallagher Index measures how unfair a voting system is.</p>
                <p>It looks at how we voted.<br />It looks at how we're represented.<br />Then it says how different those two measurements are.</p>
                <p>So if a party gets more seats than votes, the index is high.<br />If all parties win seats in proportion to their votes, the index is zero.</p>
            </div>
            <div id="section-2" class="section">
                <h2>Breaking it down</h2>
                <p>The following is how we calculate the Gallagher Index for Canada's 2015 federal election.</p>
                <table id="breakdown">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Votes</th>
                            <th>Seats</th>
                            <th>Vote %</th>
                            <th>Seat %</th>
                            <th>Difference</th>
                            <th>Squared</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="party in selectedExample.parties">
                            <th>{{ party.name }}</th>
                            <td><input type="number" min="0" step="1" v-model.number="party.votes" class="form-control wider" /></td>
                            <td><input type="number" min="0" step="1" v-model.number="party.seats" class="form-control" /></td>
                            <td><input type="text" disabled :value="per(party.votePercentage)" class="form-control" /></td>
                            <td><input type="text" disabled :value="per(party.seatPercentage)" class="form-control" /></td>
                            <td><input type="text" disabled :value="per(party.difference)" class="form-control" :style="{ 'font-weight': Math.abs(party.difference) > 3.17 ? 'bold' : 'normal' }" /><!-- I obtained 3.17 by reversing a Gallagher Index of 5 to show how what average difference that might imply --></td>
                            <td><input type="text" disabled :value="per(Math.pow(party.difference, 2))" class="form-control" /></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="6">Sum</th>
                            <td><input type="text" disabled :value="per(diffSquaredSum)" class="form-control" /></td>
                        </tr>
                        <tr>
                            <th colspan="6">Halved</th>
                            <td><input type="text" disabled :value="per(diffSquaredSum / 2)" class="form-control" /></td>
                        </tr>
                        <tr>
                            <th colspan="6">Square rooted</th>
                            <td><input type="text" disabled :value="per(Math.pow(diffSquaredSum / 2, 0.5))" class="form-control" /></td>
                        </tr>
                    </tfoot>
                </table>
                <h3>Resulting Gallagher Index<br/><span class="highlight">&mdash; {{ Math.round(gallagherIndex) }}% &mdash;</span></h3>
                <h3>Maximum recommended by the Special Committee<br/><span class="highlight">&mdash; 5% &mdash;</span></h3>
            </div>
            <footer class="section">
                <p><a href="/#section-3">Return to iscanadafair.ca for more context</a></p>
            </footer>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.4/vue.min.js"></script>
        <script src="gallagher.js"></script>
    </body>
</html>
